package club.dlblog.page.config;import club.dlblog.page.Interceptor.ShardingInterceptorPlugin;import club.dlblog.page.helper.ShardingStrategy;import org.apache.ibatis.plugin.Interceptor;import org.apache.ibatis.session.SqlSessionFactory;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.beans.factory.annotation.Value;import org.springframework.context.annotation.Bean;import org.springframework.context.annotation.Configuration;import java.util.Set;@Configurationpublic class ShardingTableConfig {    @Autowired    private SqlSessionFactory sqlSessionFactory;    @Value("${mybatis.sharding.tables}")    private Set<String> tables;    @Value("${mybatis.sharding.number}")    private int ShardingNumber;    @Bean    public Interceptor initShardingInterceptor() {        Interceptor shardingInterceptor = new ShardingInterceptorPlugin(tables, new ShardingStrategy() {            @Override            public String doSharding(String o, Object s) {                int code = s.hashCode();                code = code > 0 ? code : -code;                return o + "_" + (code % ShardingNumber + 1);            }        });        sqlSessionFactory.getConfiguration().addInterceptor(shardingInterceptor);        return shardingInterceptor;    }}